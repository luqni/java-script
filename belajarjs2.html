<html>
    <head>
        <title>tes</title>
    </head>
    <body>
        <!-- <button type="button" onclick="addData()">Add Data</button> -->
        <label>Nama Barang</label>
        <select name='namabarang' id="namabarang">
            <option selected>Indomie</option>
            <option>Royco</option>
            <option>Bimoli</option>
            <option>Margarin</option>
        </select>
        <br><br>
        <!-- <input type="text" id="namabarang"><br><br> -->
        <label>Harga</label>
        <input type="number" id="harga"><br><br>
        <label>Jumlah</label>
        <input type="number" id="jumlah"><br><br>
        <!-- <input type="number" id="counter">
        <button type="button" onclick="addTableOtomatis()">Add Otomatis</button> -->
          
        <button type="button" onclick="addtable()">Add Row</button>
        <button type="button" onclick="hapus()">Delete page</button>
        <br><br>
        <table id="tableMain" border="1">
            <thead>
                <tr>
                    <td>No</td>
                    <td>Nama Barang</td>
                    <td>Harga</td>
                    <td>Jumlah</td>
                    <!-- <td>Total</td> -->
                    <td>Aksi</td>
                    <td>Diskon</td>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
            <tfoot id="hasil"></tfoot>
        </table>

        <script>

             function hitung(x){
                 
                var table = document.getElementById("tableBody");
                var z =(document.getElementById('harga').value)*(document.getElementById('jumlah').value);
                var discoun = 0;
                if (jumlah >= 5){
                    discoun = 10/100*z;
                }
                var c = (document.getElementById('harga').value)*(document.getElementById('jumlah').value)-discoun;
                var harga = 0;
                 var jumlah = 0;
                 var dsc = 0;
                 for (i=0; i < table.rows.length; i++){
                     dsc = dsc + parseInt(table.rows[i].cells[5].innerHTML);
                    jumlah = jumlah + parseInt(table.rows[i].cells[2].innerHTML);
                     harga = harga + parseInt(table.rows[i].cells[2].innerHTML)*parseInt(table.rows[i].cells[3].innerHTML) - discoun;
                 }
                var barang =0;
                for (i=0; i< table.rows.length; i++){
                    barang = barang + parseInt(table.rows[i].cells[3].innerHTML);
                }
                hasil.innerHTML="<td colspan='2'>total "+barang+"</td><td colspan='3'> total Bayar "+harga+"</td>"
                x();
            }
            function addtable(){
                // var table = document.getElementById("tableBody");
                var x = document.getElementById("tableBody").rows.length;
                var hasil = document.getElementById('hasil');
                var nama = document.getElementById('namabarang').value;
                var harga = document.getElementById("harga").value;
                var jumlah = document.getElementById("jumlah").value;
                var table = document.getElementById("tableBody");
                y = x-1;
                q = table.rows.length;

                var z =(document.getElementById('harga').value)*(document.getElementById('jumlah').value);
                var discoun = 0;
                if (jumlah >= 5){
                    discoun = 10/100*z;
                }
                var c = (document.getElementById('harga').value)*(document.getElementById('jumlah').value)-discoun;
                var row = table.insertRow();
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                var cell5 = row.insertCell(4);
                var cell6 = row.insertCell(5);
                                 
                cell1.innerHTML = x+1;
                cell2.innerHTML = nama;
                cell3.innerHTML = harga;
                cell4.innerHTML = jumlah;
                // cell5.innerHTML = '<button onclick="this.parentNode.parentNode.parentNode.deleteRow(this.parentNode.parentNode.rowIndex-1)">Hapus</button>' ;
                cell5.innerHTML = '<button onclick="hapus()">Hapus</button>' ;
                cell6.innerHTML = discoun;

                hitung(callbackAdd);
                
                 
               
            }

            function hapus(){
                
                var td = event.target.parentNode;
                var tr = td.parentNode;
                tr.parentNode.removeChild(tr)
                hitung(callbackDelete);

            }

             function callbackAdd(){
                 alert('data berhasil ditambah');
             }
             function callbackDelete(){
                 alert('data berhasil dihapus');
             }

            // function menghitungDiskon(){
            //     for(i=0; i < table.rows.length; i++){
            //         isi = parseInt(table.rows[i].cells[3]);

            //         if(isi >= 5){
            //             var dapat;
            //         }else{
            //             var tidakDapat;
            //         }
            //     }


            // }

           

            // function addTableOtomatis(){
            //     x = document.getElementById('counter').value;
                
            //     for (let i = 1; i <= x; i++) {
            //             // if(i%2==0)
            //          var table = document.getElementById("tableBody");
            //          var row = table.insertRow(0);
            //          var cell1 = row.insertCell(0);
            //          var cell2 = row.insertCell(1);
            //          var cell3 = row.insertCell(2);
            //          var cell4 = row.insertCell(3);
            //         cell1.innerHTML = (x-i+1);
            //         cell2.innerHTML = "Nama Barang";
            //         cell3.innerHTML = "Jumlah";
            //     }
            // }
        </script>
    </body>
</html>